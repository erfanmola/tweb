/*
 * https://github.com/morethanwords/tweb
 * Copyright (C) 2019-2021 Eduard Kuzmenko
 * https://github.com/morethanwords/tweb/blob/master/LICENSE
 */

.animated-close-icon {
  position: absolute;
  transform: rotate(-45deg);
  pointer-events: none;

  .is-rtl & {
    transform: rotate(135deg);
  }

  &,
  &:before,
  &:after {
    width: 1.125rem;
    height: 0.125rem;
    border-radius: 0.125rem;
    background-color: var(--secondary-text-color);
  }

  &:before,
  &:after {
    position: absolute;
    left: 0;
    top: 0;
    content: "";
  }

  &:before {
    transform: rotate(90deg);
  }

  @include animation-level(2) {
    &,
    &:before,
    &:after {
      transition: transform var(--slide-header-transition);
    }
  }

  &.state-back {
    transform: rotate(180deg);

    .is-rtl & {
      transform: rotate(0deg);
    }

    &:before {
      transform: rotate(45deg) scaleX(0.75) translateY(-0.375rem);
    }

    &:after {
      transform: rotate(-45deg) scaleX(0.75) translateY(0.375rem);
    }
  }
}

.animated-menu-icon {
  --color: var(--secondary-text-color);
  position: absolute;

  &,
  &:before,
  &:after {
    width: 1.125rem;
    height: 0.125rem;
    border-radius: 0.125rem;
    background-color: var(--color);
    transform: rotate(0);
  }

  .is-rtl & {
    transform: rotate(180deg);
  }

  @include animation-level(2) {
    &,
    &:before,
    &:after {
      transition: transform 0.25s;
    }
  }

  &:before,
  &:after {
    position: absolute;
    left: 0;
    content: "";
  }

  &:before {
    top: -0.3125rem;
  }

  &:after {
    top: 0.3125rem;
  }

  &.state-back {
    transform: rotate(180deg);

    .is-rtl & {
      transform: rotate(0deg);
    }

    &:before {
      transform: rotate(45deg) scaleX(0.75) translate(0.375rem, -0.1875rem);
    }

    &:after {
      transform: rotate(-45deg) scaleX(0.75) translate(0.375rem, 0.1875rem);
    }
  }
}

.animated-menu-close-icon {
  margin-top: -0.625rem;
  transform: translate(0, 0) rotate(0) !important;

  &:before {
    top: 0.3125rem;
    opacity: 1;

    @include animation-level(2) {
      transition:
        transform 0.25s,
        opacity 0.125s 0s;
    }
  }

  &:after {
    top: 0.625rem;
  }

  &.state-back {
    transform: translate(0, 0.3125rem) rotate(135deg) !important;

    &:before {
      transform: rotate(45deg);
      opacity: 0;
    }

    &:after {
      transform: translate(-0rem, -0.625rem) rotate(90deg);
    }
  }
  /* &.state-back {
    transform: rotate(135deg) translate(.25rem, -.1875rem);

    &:before {
      transform: rotate(45deg);
      opacity: 0;
    }

    &:after {
      transform: rotate(90deg) translate(-.625rem, 0rem);
    }
  } */
}

.animated-button-icon {
  &-icon {
    position: absolute;
    height: 1.5rem;
    line-height: 1.5rem;
    animation: hide-icon 0.4s forwards ease-in-out;

    @include animation-level(0) {
      visibility: hidden;
      animation: none !important;
    }
  }
}

.animated-menu-icon-indicator {
  --color: var(--secondary-text-color);
  position: absolute;
  width: 0.45rem;
  height: 0.45rem;
  border-radius: 1rem;
  background-color: var(--color);
  transform: translateY(-0.35rem) translateX(0.5rem);
  border: 0.0875rem solid var(--surface-color);
  display: none;
  transition: opacity 0.325s;

  &.animated-menu-icon-indicator-visible {
    display: block;
  }

  &.animated-menu-icon-indicator-active {
    --color: var(--primary-color);
    background-color: var(--color);
  }
}

.state-back {
  & ~ .animated-menu-icon-indicator {
    transition: opacity 0.325s;
    opacity: 0;
  }
}
